% Generated in part using
% https://github.com/numpde/ibiocomp/blob/main/code/20201229_LogicalTables/Subtractor.py

% RA, 2020-12-30

\begin{table}[hpbt]
\centering

\begin{minipage}{0.2\linewidth}
	\centering
			
	Half-subtractor:
	
	{\ }
	
	\begin{tabular}{cc|cc}
		\ce{s_3} &  \ce{c_3} &  \ce{d_3} &  -- \\
		\hdashline
		\ce{s_2} &  \ce{c_2} &  \ce{d_2} &  \ce{c_3} \\
		\hdashline
		\ce{s_0} &  \ce{r_0} &  \ce{d_0} &  \ce{c_1} \\
		\hline
         0 &          0 &          0 &          0 \\
         0 &          1 &          1 &          1 \\
         1 &          0 &          1 &          0 \\
         1 &          1 &          0 &          0 \\
	\end{tabular}
\end{minipage}
%
\quad
%
\begin{minipage}{0.3\linewidth}
	\centering
			
%		Full subtractor:
%		
%		{\ }
	
	\begin{tabular}{ccc|cc}
		\ce{s_1} &  \ce{r_1} &  \ce{c_1} &  \ce{d_1} &  \ce{c_2} \\
		\hline
         0 &          0 &          0 &          0 &          0 \\
         0 &          0 &          1 &          1 &          1 \\
         0 &          1 &          0 &          1 &          1 \\
         0 &          1 &          1 &          0 &          1 \\
         1 &          0 &          0 &          1 &          0 \\
         1 &          0 &          1 &          0 &          0 \\
         1 &          1 &          0 &          0 &          0 \\
         1 &          1 &          1 &          1 &          1 \\
	\end{tabular}
\end{minipage}
%
\quad
%
\begin{minipage}{0.3\linewidth}
	\begin{align*}
		\ce{& & 8 s_3 + 4 s_2 + 2 s_1 + s_0 &}
		\\
		- \ce{& & 2 r_1 + r_0 &}
		\\
		= \ce{& & 8 d_3 + 4 d_2 + 2 d_1 + d_0 &}
	\end{align*}
\end{minipage}

\caption{%
	The subtractor computes
	\ce{d = s - r} (mod 16).
	%
	Since \ce{r} only has 
	the two lowest bits, 
	a half-subtractor
	is sufficient for
	the bits \ce{d_0}/\ce{d_2}/\ce{d_3}
	and the carry flags \ce{c_1}/\ce{c_3},
	and
	only \ce{d_1}/\ce{c_2}
	require the full subtractor.
	%
	We have $\ce{d_0} = (\ce{s_0} \XOR \ce{r_0});
	\ce{c_1} = \NOT (\ce{s_0} \geq \ce{r_0});
	\ce{d_1} = ((\ce{s_1} + \ce{r_1} + \ce{c_1}) \mathrm{mod} 2);
	\ce{c_2} = \NOT (\ce{s_1} \geq \ce{r_1} \geq \ce{c_1})$.
	%
	%
	See Fig.~\ref{f:logical-subtractor01}
	for a logic circuit of
	the subtractor.
}

\label{t:subtractor1}
\end{table}

